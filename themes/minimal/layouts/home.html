{{ define "main" }}
  {{ with .Content }}
    <div class="content">{{ . }}</div>
  {{ end }}
  {{ $posts := where site.RegularPages "Section" "posts" }}
  {{ $recent := first 3 $posts.ByDate.Reverse }}
  {{ if gt (len $recent) 0 }}
    <section class="recent-posts">
      <h2>Recent posts</h2>
      <a class="recent-posts__all" href="{{ "/posts/" | relLangURL }}">Browse all</a>
      <div class="post-list">
        {{ range $recent }}
          <article class="post-card">
            <h2><a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></h2>
            {{ with .Date }}
              {{ $machine := . | time.Format "2006-01-02" }}
              <time datetime="{{ $machine }}">{{ . | time.Format ":date_long" }}</time>
            {{ end }}
          </article>
        {{ end }}
      </div>
      <a class="recent-posts__all" href="{{ "/posts/" | relLangURL }}">Browse all</a>
    </section>
  {{ else }}
    <p>No posts published yet.</p>
  {{ end }}
{{ end }}
